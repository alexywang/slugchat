(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){e.exports=n(285)},117:function(e,t,n){},118:function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},119:function(e,t,n){},146:function(e,t){},285:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(111),i=n.n(s),r=(n(117),n(21)),c=n(7),l=n(8),m=n(10),u=n(9),h=n(2),d=n(11),v=(n(118),n(119),n(17)),g=n.n(v),p=(n(149),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={messages:[],typers:[],myHandle:"",myMessage:"",endpoint:"/"},n.onMessageReceived=n.onMessageReceived.bind(Object(h.a)(n)),n.onTypingReceived=n.onTypingReceived.bind(Object(h.a)(n)),n.onHandleBoxChange=n.onHandleBoxChange.bind(Object(h.a)(n)),n.onMessageBoxChange=n.onMessageBoxChange.bind(Object(h.a)(n)),n.onMessageBoxSubmit=n.onMessageBoxSubmit.bind(Object(h.a)(n)),n.onClientDisconnect=n.onClientDisconnect.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onMessageReceived",value:function(e){var t=this.state.messages,n=[].concat(Object(r.a)(t),[e]);this.setState({messages:n});var a=this.state.typers.filter(function(t){return e.handle!==t});this.setState({typers:a})}},{key:"onClientDisconnect",value:function(e){e.handle.handle;var t=this.state.typers.filter(function(t){return e.handle!==t});this.setState({typers:t})}},{key:"onTypingReceived",value:function(e){console.log("New typer: "+e);var t=this.state.typers,n=-1===t.indexOf(e)?[].concat(Object(r.a)(t),[e]):t;this.setState({typers:n})}},{key:"onHandleBoxChange",value:function(e){console.log("Handle changing..."),this.setState({myHandle:e.target.value})}},{key:"onMessageBoxChange",value:function(e){console.log("Message changing...");var t=this.state.myHandle;this.socket.emit("typing",t),this.setState({myMessage:e.target.value})}},{key:"onMessageBoxSubmit",value:function(e){console.log("Sending message.");var t=this.state,n=t.myHandle,a=t.myMessage;this.socket.emit("message",{text:a,handle:n}),this.setState({myMessage:""}),e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this,t=this.state.endpoint;this.socket=g()(t),this.socket.on("message",function(t){console.log(t),e.onMessageReceived(t)}),this.socket.on("typing",function(t){console.log("New typer "+t),e.onTypingReceived(t)})}},{key:"render",value:function(){var e=this.state,t=e.messages,n=e.typers,a=e.myHandle,s=e.myMessage;return o.a.createElement("div",{className:"Chat"},o.a.createElement("h1",null,"Slugchat"),o.a.createElement(b,{messages:t}),o.a.createElement(C,{list:n}),"Enter your message: ",o.a.createElement("br",null),o.a.createElement(f,{value:a,onChange:this.onHandleBoxChange}),o.a.createElement(y,{value:s,onChange:this.onMessageBoxChange,onSubmit:this.onMessageBoxSubmit},"Send "))}}]),t}(a.Component)),b=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.messages;return o.a.createElement("div",{className:"MessageDisplay"},e.map(function(e){return o.a.createElement("div",{key:e.handle+" "+e.text,id:"message"},o.a.createElement("p",null," ",o.a.createElement("span",{id:"messageHandle"},e.handle,": ")," ",o.a.createElement("span",{id:"messageText"},e.text)," "))}))}}]),t}(a.Component),y=function(e){var t=e.value,n=e.onChange,a=e.onSubmit,s=e.children;return o.a.createElement("form",{className:"MessageBox",onSubmit:a},o.a.createElement("input",{type:"text",onChange:n,value:t}),o.a.createElement("button",{type:"submit"},s))},f=function(e){var t=e.value,n=e.onChange,a=e.children;return o.a.createElement("input",{type:"text",className:"HandleBox",onChange:n,value:t},a)},C=function(e){var t=e.list,n=t.length>1?"are":"is";return o.a.createElement("div",{className:"DynamicList"},o.a.createElement("p",null,t.length>0?function(e){var t="";if(0===e.length)return"";for(var n=0;n<e.length-1;n++)t+="".concat(e[n],", ");return t+=e[e.length-1]}(t)+" ".concat(n," typing..."):""))},E=p,j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={rooms:[],endpoint:"/"},n.onCreateRoom=n.onCreateRoom.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onCreateRoom",value:function(e,t,n){if(e.preventDefault(),t&&n){(n>100||n<2)&&window.alert("Capacity must be between 2 and 100"),console.log(t),console.log(n);var a=this.props.onRoomJoin;this.chatSocket.emit("createRoom",{name:t,capacity:n}),this.chatSocket.on("newRoomReady",function(e){a(e)})}}},{key:"componentDidMount",value:function(){var e=this,t=this.state.endpoint;this.lobbySocket=g()(t+"/lobby"),this.chatSocket=g()(t+"/chats"),this.lobbySocket.on("roomList",function(t){console.log("Receiving room list..."),e.setState({rooms:t})})}},{key:"render",value:function(){var e=this.props.onRoomJoin;return o.a.createElement("div",{className:"Lobby"},o.a.createElement(R,{rooms:this.state.rooms,onRoomJoin:e}),o.a.createElement(S,{onCreateRoom:this.onCreateRoom},"Create Room"))}}]),t}(a.Component),R=function(e){var t=e.rooms,n=e.onRoomJoin;return o.a.createElement("div",{className:"RoomList"},t.map(function(e){return o.a.createElement(k,{key:e.id,room:e,onRoomJoin:function(){return n(e)}},"Join")}))},k=function(e){var t=e.room,n=e.onRoomJoin,a=e.children,s=t.name,i=t.capacity,r=t.users,c=r.map(function(e){return e.name}),l=r.length>=i?{backgroundColor:"red"}:{backgroundColor:"green"};return o.a.createElement("div",{className:"Room"},o.a.createElement("span",{id:"title"},s),o.a.createElement("button",{id:"join",onClick:n},a),o.a.createElement("span",{id:"userlist"},o.a.createElement(O,{list:c},o.a.createElement("span",{id:"capacity",style:l},"".concat(r.length,"/").concat(i)))))},O=function(e){var t=e.list,n=e.children,a=0;return o.a.createElement("div",{className:"HoverList"},o.a.createElement("div",{className:"HoverHitbox"},n),o.a.createElement("div",{className:"HoverContent"},t.map(function(e){return o.a.createElement("li",{key:a++},e)})))},S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={name:"",capacity:void 0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onCreateRoom,a=t.children,s=this.state,i=s.name,r=s.capacity;return o.a.createElement("div",{className:"CreateRoom"},o.a.createElement("form",{onSubmit:function(e){return n(e,i,r)}},o.a.createElement("input",{type:"text",onChange:function(t){e.setState({name:t.target.value})},value:i,placeholder:"Chat Room Name"}),o.a.createElement("input",{type:"number",onChange:function(t){e.setState({capacity:t.target.value})},value:r,placeholder:"Capacity"}),o.a.createElement("button",{type:"submit"},a)))}}]),t}(a.Component),x=j,M=(n(17),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={joinedRooms:[],user:{name:"",id:""+Math.random()},usernameInput:""},n.addRoom=n.addRoom.bind(Object(h.a)(n)),n.leaveRoom=n.leaveRoom.bind(Object(h.a)(n)),n.onUsernameSubmit=n.onUsernameSubmit.bind(Object(h.a)(n)),n.onUsernameChange=n.onUsernameChange.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onUsernameSubmit",value:function(e){e.preventDefault();var t={name:this.state.usernameInput,id:this.state.user.id};this.setState({user:t})}},{key:"onUsernameChange",value:function(e){this.setState({usernameInput:e.target.value})}},{key:"addRoom",value:function(e){this.state.user;var t=this.state.joinedRooms;if(!t.find(function(t){return t.id===e.id}))if(e.users.length<e.capacity){console.log("Adding a new chat.");var n=[].concat(Object(r.a)(t),[e]);this.setState({joinedRooms:n})}else console.log("Room was full.")}},{key:"leaveRoom",value:function(e){var t=this.state.joinedRooms.filter(function(t){return t.id!==e.id});this.setState({joinedRooms:t})}},{key:"renderChat",value:function(e){var t=this.state.user;return o.a.createElement("div",{key:e.id,className:"grid-item"},o.a.createElement("div",null,o.a.createElement(E,{room:e,user:t,onLeaveRoom:this.leaveRoom})))}},{key:"renderAllChats",value:function(){var e=this,t=this.state.joinedRooms;return o.a.createElement("div",{className:"AllChats"},t.map(function(t){return e.renderChat(t)}))}},{key:"render",value:function(){return this.state.user.name?o.a.createElement("div",{className:"ChatGrid"},o.a.createElement("div",{className:"grid-item"},o.a.createElement(x,{onRoomJoin:this.addRoom})),this.renderAllChats()):o.a.createElement("div",{className:"usernamePrompt"},o.a.createElement(N,{onSubmit:this.onUsernameSubmit,onChange:this.onUsernameChange,placeholder:"Choose your display name"},"Set Username"))}}]),t}(a.Component)),N=function(e){var t=e.onSubmit,n=e.onChange,a=e.placeholder,s=e.children;return o.a.createElement("form",{className:"TextInput",onSubmit:t},o.a.createElement("input",{type:"text",placeholder:a,onChange:n}),o.a.createElement("button",{type:"submit"},s))},w=M;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[112,1,2]]]);
//# sourceMappingURL=main.e5824cc4.chunk.js.map